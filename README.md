# TPC-DS-mariadb (INFO-H-419) 

Development of a TPC-DS benchmark for mariaDB.

You can find the project report at the root of the repository. 

To reproduce the benchmark:

1. First download the [tpcds-kit](https://github.com/gregrahn/tpcds-kit) and follow the steps described in the file "How_To_Guide-DS-V2.0.0.docx" to generate random datas. 

2. Then download [MariaDB](https://mariadb.org/download/?t=mariadb&p=mariadb&r=11.3.0&os=windows&cpu=x86_64&pkg=msi&m=tripleit)

3. Create the DB and populate it using the scripts described bellow. 

# Structure of the repository

## Result folder

This folder contains the results of the load test, power test and throughput test.

## SQL folder

In this folder you can find different sql script such as:

* `tpcds.sql` & `tpcds_ri.sql`: Script coming from the tpc-ds toolkit to generate the required tables

* `drop_tables.sql`: Scrict used to drop the 25 tables given by the tdc-ds toolkit 

* `query_0.sql`: the 99 queries (dialect=DB2) generated by dsqgen into a single file

* `upload.sql`: Load the datas generated by dsdgen into tables. Please update the path to the folder where the ".dat" files are stored. 

* the folder `generated_query`: It contains the set of 99 queries used for doing the power test and the throughput test. 

## Scripts 

At the root of the repository you can find multiple python scripts. You have also a file config.ini which is used to setup a connection to the DB. But first create a user without any password wich has full privilege.

* `execute_script_sql.py`: takes a sql file in parameter and execute the whole file into to DB. Output the time that it takes to execute the sql file. 
* `power_test.py`: Performs the power test of the 99 queris (update the `datadir` variable in the python file to the location of the folder wich contains the 99 queries)
* `throughput_test.py`: performs the throughput test (update the `datadir` variable in the python file to the location of the folder wich contains the 99 queries)
* `seperate_queries.py`: Script used for seperating the `query_0.sql` into 99 distinct files. 
* `figure.ipynb`: notebook use for ploting our results 

Before executing these python scripts please install this package first:

```
pip install mysql-connector-python
```


